(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{223:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),l=a(27),i=a.n(l),s=a(225),c=a(227),o=a(226),p=(a(87),a(13)),u=a(14),d=a(16),h=a(15),y=a(17),m=a(4),b=a(47),f=a.n(b),v=a(224),E=a(73),k=a.n(E),j=a(75),x=a.n(j),g=a(76),O=a.n(g),w=a(78),S=a.n(w),B=a(31),I=a(77),T=a.n(I),C=function(e){function t(e){var a;return Object(p.a)(this,t),(a=Object(d.a)(this,Object(h.a)(t).call(this,e))).state={keyword:""},a.changeKeyword=a.changeKeyword.bind(Object(m.a)(Object(m.a)(a))),a}return Object(y.a)(t,e),Object(u.a)(t,[{key:"changeKeyword",value:function(e){this.setState({keyword:e.target.value})}},{key:"render",value:function(){var e=this;return r.a.createElement(k.a,{position:"fixed",color:"primary"},r.a.createElement(x.a,null,r.a.createElement(O.a,{variant:"title",color:"inherit",style:{marginRight:"16px"}},r.a.createElement(v.a,{to:"/",style:{textDecoration:"none",color:"inherit"}},"Preview")),r.a.createElement("div",{style:{flexGrow:1}}),r.a.createElement("div",{style:{position:"relative",marginLeft:0,backgroundColor:Object(B.fade)("#FFFFFF",.15)}},r.a.createElement("div",{style:{position:"absolute",height:"100%",display:"flex",alignItems:"center",justifyContent:"center",paddingLeft:"8px"}},r.a.createElement(T.a,null)),r.a.createElement(S.a,{name:"keyword",type:"search",placeholder:"Search...",style:{color:"inherit",paddingLeft:"48px"},value:this.state.keyword,onChange:this.changeKeyword,onKeyDown:function(t){return 13===t.keyCode?e.props.searchByKeyword(e.state.keyword):null},onKeyUp:function(e){return 13===e.keyCode?document.activeElement.blur():null}}))))}}]),t}(r.a.Component),P=a(23),K=a.n(P),z=a(46),F=a.n(z),q=a(36),R=a.n(q),J=a(79),U=a.n(J),N=function(e){function t(e){var a;return Object(p.a)(this,t),(a=Object(d.a)(this,Object(h.a)(t).call(this,e))).state={playState:e.playState,time:e.time},a}return Object(y.a)(t,e),Object(u.a)(t,[{key:"componentWillReceiveProps",value:function(e){this.setState({playState:e.playState})}},{key:"render",value:function(){var e=this,t=this.state.playState,a="",n="",l="";if(t){var i=this.props.results[this.props.index],s=r.a.createElement("img",{src:i.artworkUrl100,alt:i.name,style:{maxWidth:"44px",maxHeight:"44px",padding:"0px"}}),c=r.a.createElement("div",{style:{textOverflow:"ellipsis",overflow:"hidden",fontSize:"small"}},this.props.index+1,". ",i.trackName," / ",i.artistName),o=r.a.createElement("table",null,r.a.createElement("tbody",null,r.a.createElement("tr",null,r.a.createElement("td",{style:{padding:"0px"}},s),r.a.createElement("td",{style:{padding:"0px"}},c)))),p=this.props.time.currentTime?this.props.time.currentTime:0,u=this.props.time.duration?this.props.time.duration:100;l=r.a.createElement(U.a,{value:p,max:u,miin:0,disabled:!0,style:{width:"100%"}}),a=r.a.createElement(R.a,{elevation:8,style:{position:"fixed",left:"0px",bottom:"0px",height:"48px",width:"100%",padding:"0px",margin:"0px",zIndex:"990",alignItems:"top"}},l,o),n="play"===t?r.a.createElement(F.a,{style:{position:"fixed",right:"20px",bottom:"20px",padding:"4px",zIndex:"999"},color:"secondary",onClick:function(){return e.props.pause()}},r.a.createElement(K.a,{fontSize:"small"},"pause_arrow")):r.a.createElement(F.a,{style:{position:"fixed",right:"20px",bottom:"20px",padding:"4px",zIndex:"999"},color:"secondary",onClick:function(){return e.props.restart()}},r.a.createElement(K.a,{fontSize:"small"},"play_arrow"))}else;return r.a.createElement("div",null,a,n)}}]),t}(r.a.Component),_=a(39),D=a.n(_),W=a(80),A=a.n(W),L=function(e){function t(){return Object(p.a)(this,t),Object(d.a)(this,Object(h.a)(t).apply(this,arguments))}return Object(y.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){var e=this,t=this.props.result,a=this.props.index;return r.a.createElement(A.a,{style:{marginBottom:"8px"}},r.a.createElement("table",null,r.a.createElement("tbody",null,r.a.createElement("tr",null,r.a.createElement("td",null,r.a.createElement("img",{src:this.props.result.artworkUrl100,alt:this.props.result.name})),r.a.createElement("td",null,a+1,". ",t.trackName,r.a.createElement(D.a,{style:{padding:"4px"},onClick:function(){return e.props.play(a)}},r.a.createElement(K.a,{fontSize:"small"},"play_circle_filled")),r.a.createElement("br",null),t.artistName,r.a.createElement(v.a,{to:"/id/"+this.props.result.artistId,style:{textDecoration:"none"}},r.a.createElement(D.a,{style:{padding:"4px"}},r.a.createElement(K.a,{fontSize:"small"},"search"))),r.a.createElement("br",null),t.collectionName,r.a.createElement(v.a,{to:"/id/"+this.props.result.collectionId,style:{textDecoration:"none"}},r.a.createElement(D.a,{style:{padding:"4px"}},r.a.createElement(K.a,{fontSize:"small"},"search"))),r.a.createElement("br",null),r.a.createElement("a",{id:this.props.result.id,href:this.props.result.trackViewUrl,target:"_blank",rel:"noopener noreferrer",style:{display:"inline-block",overflow:"hidden",background:"url(https://linkmaker.itunes.apple.com/assets/shared/badges/ja-jp/itunes-sm.svg) no-repeat",width:"45px",height:"15px",backgroundSize:"contain"}}," "))))))}}]),t}(r.a.Component),G=function(e){function t(e){var a;return Object(p.a)(this,t),(a=Object(d.a)(this,Object(h.a)(t).call(this,e))).state={results:e.results},a}return Object(y.a)(t,e),Object(u.a)(t,[{key:"componentWillReceiveProps",value:function(e){this.setState({results:e.results})}},{key:"render",value:function(){var e=this,t=[];return this.state.results.forEach(function(a,n){t.push(r.a.createElement(L,{result:a,key:a.trackId,index:n,play:e.props.play}))}),t.push(r.a.createElement("div",{key:-1,style:{height:"40px"}})),r.a.createElement("div",null,t)}}]),t}(r.a.Component),H=function(e){function t(e){var a;switch(Object(p.a)(this,t),(a=Object(d.a)(this,Object(h.a)(t).call(this,e))).state={results:[],playIndex:null,playState:null,time:{currentTime:null,duration:null}},a.search=a.search.bind(Object(m.a)(Object(m.a)(a))),a.searchByCollectionId=a.searchByCollectionId.bind(Object(m.a)(Object(m.a)(a))),a.searchByArtistId=a.searchByArtistId.bind(Object(m.a)(Object(m.a)(a))),a.searchByKeyword=a.searchByKeyword.bind(Object(m.a)(Object(m.a)(a))),a.play=a.play.bind(Object(m.a)(Object(m.a)(a))),a.playEnd=a.playEnd.bind(Object(m.a)(Object(m.a)(a))),a.playTimeupdate=a.playTimeupdate.bind(Object(m.a)(Object(m.a)(a))),a.playPause=a.playPause.bind(Object(m.a)(Object(m.a)(a))),a.playRestart=a.playRestart.bind(Object(m.a)(Object(m.a)(a))),a.playFinish=a.playFinish.bind(Object(m.a)(Object(m.a)(a))),e.match.path){case"/q/:query":a.searchByTerm(e.match.params.query);break;case"/id/:id":a.searchByCollectionId(e.match.params.id);break;default:a.searchByTopsales()}return a}return Object(y.a)(t,e),Object(u.a)(t,[{key:"componentWillReceiveProps",value:function(e){switch(e.match.path){case"/q/:query":this.searchByTerm(e.match.params.query);break;case"/id/:id":this.searchByCollectionId(e.match.params.id);break;default:this.searchByTopsales()}}},{key:"searchByKeyword",value:function(e){this.props.history.push("/q/"+e)}},{key:"searchByTerm",value:function(e){var t="https://itunes.apple.com/search?country=JP&entity=song&term="+e.replace(/ /g,"+");this.search(t)}},{key:"searchByCollectionId",value:function(e){var t="https://itunes.apple.com/lookup?country=JP&entity=song&id="+e;this.search(t)}},{key:"searchByArtistId",value:function(e){var t="https://itunes.apple.com/lookup?country=JP&entity=song&id="+e;this.search(t)}},{key:"searchByTopsales",value:function(){var e=this;fetch("https://5i396a71kj.execute-api.ap-northeast-1.amazonaws.com/prod/rss",{mode:"cors"}).then(function(e){return e.json()}).then(function(t){var a="";t.feed.results.forEach(function(e){a=a.concat(e.id,",")}),e.search("https://itunes.apple.com/lookup?country=JP&entity=song&id="+a)})}},{key:"search",value:function(e){this.playFinish();var t=this,a=Math.random();fetch(e+"&random="+a,{mode:"cors",headers:{"Content-Type":"application/json; charset=utf-8"}}).then(function(e){return e.json()}).then(function(e){if(e.results){var a=e.results.filter(function(e,t,a){return"track"===e.wrapperType});t.setState({results:a}),window.scrollTo(0,0)}})}},{key:"play",value:function(e){this.setState({playIndex:e,playState:"play"});var t=document.getElementById("audio"),a=this.state.results[e];t&&(t.src=a.previewUrl,t.play())}},{key:"playEnd",value:function(e){var t=this.state.playIndex;this.state.results.length>t+1?this.play(t+1):this.playFinish()}},{key:"playPause",value:function(){this.setState({playState:"pause"});var e=document.getElementById("audio");e&&e.pause()}},{key:"playRestart",value:function(){this.setState({playState:"play"});var e=document.getElementById("audio");e&&e.play()}},{key:"playFinish",value:function(){this.setState({playIndex:null,playState:null,time:{currentTime:null,duration:null}});var e=document.getElementById("audio");e&&(e.pause(),e.src="")}},{key:"playTimeupdate",value:function(e){if(e.target){var t=e.target.currentTime,a=e.target.duration;t&&a&&this.setState({time:{currentTime:t,duration:a}})}}},{key:"render",value:function(){var e=this.state.results,t=this.state.playState,a=this.state.time;return r.a.createElement("div",null,r.a.createElement(C,{searchByKeyword:this.searchByKeyword}),r.a.createElement(N,{playState:t,time:a,pause:this.playPause,restart:this.playRestart,results:e,index:this.state.playIndex}),r.a.createElement("div",{style:{height:"64px"}}),r.a.createElement(f.a,{container:!0,justify:"center"},r.a.createElement(f.a,{item:!0,xs:12,sm:8},r.a.createElement(G,{results:e,play:this.play}))),r.a.createElement("audio",{id:"audio",onEnded:this.playEnd,onTimeUpdate:this.playTimeupdate}))}}]),t}(r.a.Component);i.a.render(r.a.createElement(s.a,{basename:"/Preview5"},r.a.createElement("div",null,r.a.createElement(c.a,null,r.a.createElement(o.a,{path:"/q/:query",component:H}),r.a.createElement(o.a,{path:"/id/:id",component:H}),r.a.createElement(o.a,{path:"/",component:H})))),document.getElementById("root"))},82:function(e,t,a){e.exports=a(223)},87:function(e,t,a){}},[[82,2,1]]]);
//# sourceMappingURL=main.1260052f.chunk.js.map