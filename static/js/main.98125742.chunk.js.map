{"version":3,"sources":["index.js"],"names":["Logic","props","_this","Object","C_Users_kazuaki_Documents_20190210_Preview5_Preview5_node_modules_babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_0__","this","C_Users_kazuaki_Documents_20190210_Preview5_Preview5_node_modules_babel_runtime_helpers_esm_possibleConstructorReturn__WEBPACK_IMPORTED_MODULE_2__","C_Users_kazuaki_Documents_20190210_Preview5_Preview5_node_modules_babel_runtime_helpers_esm_getPrototypeOf__WEBPACK_IMPORTED_MODULE_3__","call","state","results","playIndex","playMode","search","bind","C_Users_kazuaki_Documents_20190210_Preview5_Preview5_node_modules_babel_runtime_helpers_esm_assertThisInitialized__WEBPACK_IMPORTED_MODULE_5__","searchByCollectionId","searchByArtistId","searchByKeyword","play","playEnd","playTimeupdate","playPause","playRestart","playFinish","match","path","searchByTerm","params","query","id","searchByTopsales","term","history","push","url","replace","collectionId","artistId","that","fetch","mode","then","response","json","ids","feed","forEach","result","concat","random","Math","headers","Content-Type","filter","element","index","array","wrapperType","setState","window","scrollTo","playState","audio","document","getElementById","src","previewUrl","e","length","pause","react__WEBPACK_IMPORTED_MODULE_6___default","a","createElement","Header","Control","restart","style","height","List","onEnded","onTimeUpdate","React","Component","_this2","keyword","changeKeyword","target","value","_this3","_material_ui_core_AppBar__WEBPACK_IMPORTED_MODULE_17___default","position","color","_material_ui_core_Toolbar__WEBPACK_IMPORTED_MODULE_18___default","_material_ui_core_Typography__WEBPACK_IMPORTED_MODULE_19___default","variant","marginRight","react_router_dom__WEBPACK_IMPORTED_MODULE_8__","to","textDecoration","flexGrow","marginLeft","backgroundColor","fade","display","alignItems","justifyContent","paddingLeft","_material_ui_icons_Search__WEBPACK_IMPORTED_MODULE_22___default","_material_ui_core_InputBase__WEBPACK_IMPORTED_MODULE_20___default","name","type","placeholder","onChange","onKeyDown","keyCode","onKeyUp","activeElement","blur","_this4","_this5","card","button","table","border","artworkUrl100","alt","width","trackName","artistName","_material_ui_core_Card__WEBPACK_IMPORTED_MODULE_16___default","elevation","left","bottom","padding","zIndex","_material_ui_core_Fab__WEBPACK_IMPORTED_MODULE_15___default","right","onClick","_material_ui_core_Icon__WEBPACK_IMPORTED_MODULE_13___default","fontSize","_this6","_this7","children","Row","key","trackId","_this8","marginBottom","_material_ui_core_IconButton__WEBPACK_IMPORTED_MODULE_14___default","collectionName","href","trackViewUrl","rel","overflow","background","backgroundSize","ReactDOM","render","react_router_dom__WEBPACK_IMPORTED_MODULE_9__","basename","react_router_dom__WEBPACK_IMPORTED_MODULE_10__","react_router_dom__WEBPACK_IMPORTED_MODULE_11__","component"],"mappings":"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","file":"static/js/main.98125742.chunk.js","sourcesContent":["import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport { BrowserRouter, Route, Switch, Link} from 'react-router-dom'\r\nimport './index.css';\r\n\r\nimport Icon from '@material-ui/core/Icon';\r\nimport IconButton from '@material-ui/core/IconButton'\r\nimport Fab from '@material-ui/core/Fab';\r\nimport Card from '@material-ui/core/Card';\r\nimport AppBar from '@material-ui/core/AppBar';\r\nimport Toolbar from '@material-ui/core/Toolbar';\r\nimport Typography from '@material-ui/core/Typography';\r\nimport InputBase from '@material-ui/core/InputBase';\r\nimport { fade } from '@material-ui/core/styles/colorManipulator';\r\nimport SearchIcon from '@material-ui/icons/Search';\r\n\r\nclass Logic extends React.Component {\r\n  constructor(props) {\r\n    super(props);\r\n\r\n    this.state = {\r\n      results: [],\r\n      playIndex: null,\r\n      playMode: null,\r\n    };\r\n\r\n    this.search = this.search.bind(this);\r\n    this.searchByCollectionId = this.searchByCollectionId.bind(this);\r\n    this.searchByArtistId = this.searchByArtistId.bind(this);\r\n    this.searchByKeyword = this.searchByKeyword.bind(this);\r\n    this.play = this.play.bind(this);\r\n    this.playEnd = this.playEnd.bind(this);\r\n    this.playTimeupdate = this.playTimeupdate.bind(this);\r\n    this.playPause = this.playPause.bind(this);\r\n    this.playRestart = this.playRestart.bind(this);\r\n    this.playFinish = this.playFinish.bind(this);\r\n\r\n    switch(props.match.path) {\r\n      case '/q/:query':\r\n        this.searchByTerm(props.match.params.query);\r\n        break;\r\n      case '/id/:id':\r\n        this.searchByCollectionId(props.match.params.id);\r\n        break;\r\n      default:\r\n        this.searchByTopsales();\r\n        break;\r\n    }\r\n  }\r\n\r\n  componentWillReceiveProps(props) {\r\n    switch(props.match.path) {\r\n      case '/q/:query':\r\n        this.searchByTerm(props.match.params.query);\r\n        break;\r\n      case '/id/:id':\r\n        this.searchByCollectionId(props.match.params.id);\r\n        break;\r\n      default:\r\n        this.searchByTopsales();\r\n        break;\r\n    }\r\n  }\r\n\r\n  searchByKeyword(term) {\r\n    this.props.history.push('/q/' + term)\r\n  }\r\n\r\n  searchByTerm(term) {\r\n    let keyword = term.replace(/ /g, '+');\r\n    let url = \"https://itunes.apple.com/search?country=JP&entity=song&term=\" + keyword;\r\n    this.search(url);\r\n  }\r\n  \r\n  searchByCollectionId(collectionId) {\r\n    let url = \"https://itunes.apple.com/lookup?country=JP&entity=song&id=\" + collectionId\r\n    this.search(url)\r\n  }\r\n  searchByArtistId(artistId) {\r\n    let url = \"https://itunes.apple.com/lookup?country=JP&entity=song&id=\" + artistId\r\n    this.search(url)\r\n  }\r\n  searchByTopsales() {\r\n    const that = this;\r\n    fetch('https://5i396a71kj.execute-api.ap-northeast-1.amazonaws.com/prod/rss', {\r\n      mode: 'cors',\r\n    }).then(function (response) {\r\n      return response.json();\r\n    }).then(function (json) {\r\n      let ids = '';\r\n      json.feed.results.forEach(function (result) {\r\n        ids = ids.concat(result.id, ',');\r\n      });\r\n      that.search('https://itunes.apple.com/lookup?country=JP&entity=song&id=' + ids);\r\n    })\r\n  }\r\n  search(url) {\r\n    this.playFinish();\r\n\r\n    const that = this;\r\n\r\n    let random = Math.random()\r\n    let fetchUrl = url + '&random=' + random\r\n\r\n    fetch(fetchUrl, {\r\n      mode: 'cors',\r\n      headers: {\r\n        \"Content-Type\": \"application/json; charset=utf-8\",\r\n    },\r\n    }).then(function (response) {\r\n      return response.json();\r\n    }).then(function (json) {\r\n      if(json.results) {\r\n       \r\n        let results = json.results.filter((element, index, array) =>  element.wrapperType === 'track');\r\n\r\n        that.setState({\r\n          results: results,\r\n        });\r\n\r\n        window.scrollTo(0,0);\r\n      }\r\n      \r\n    })\r\n  }\r\n\r\n  play(index) {\r\n    this.setState({\r\n      playIndex: index,\r\n      playState: 'play'\r\n    })\r\n\r\n    let audio = document.getElementById('audio');\r\n    let result = this.state.results[index];\r\n    \r\n    if(audio) {\r\n      audio.src = result.previewUrl;\r\n      audio.play();\r\n    }\r\n  }\r\n\r\n  playEnd(e) {\r\n    let index = this.state.playIndex;\r\n\r\n    if(this.state.results.length > index+1) {\r\n      this.play(index+1);\r\n    }else{\r\n      this.playFinish();\r\n    }\r\n  }\r\n\r\n  playPause() {\r\n    this.setState({\r\n      playState: 'pause'\r\n    })\r\n\r\n    let audio = document.getElementById('audio');\r\n    if(audio) {\r\n      audio.pause();\r\n    }\r\n  }\r\n\r\n  playRestart() {\r\n    this.setState({\r\n      playState: 'play'\r\n    })\r\n\r\n    let audio = document.getElementById('audio');\r\n    if(audio) {\r\n      audio.play();\r\n    }\r\n  }\r\n\r\n  playFinish() {\r\n    this.setState({\r\n      playIndex: null,\r\n      playState: null,\r\n    })\r\n\r\n    let audio = document.getElementById('audio');\r\n    if(audio) {\r\n      audio.pause();\r\n      audio.src = '';\r\n    }\r\n  }\r\n\r\n  playTimeupdate(e){\r\n\r\n  }\r\n\r\n  render() {\r\n    let results = this.state.results;\r\n    let playState = this.state.playState;\r\n\r\n    return(\r\n      \r\n      <div>\r\n        <Header searchByKeyword={this.searchByKeyword}/>\r\n        <Control playState={playState} pause={this.playPause} restart={this.playRestart} results={results} index={this.state.playIndex} />\r\n        <div style={{height:'72px'}}></div>\r\n        <List results={results} play={this.play}/>\r\n        <audio id='audio' onEnded={this.playEnd} onTimeUpdate={this.playTimeupdate}></audio>\r\n      </div>\r\n    \r\n    );\r\n  }\r\n}\r\n\r\nclass Header extends React.Component {\r\n  constructor(props) {\r\n    super(props);\r\n\r\n    this.state = {\r\n      keyword: ''\r\n    }\r\n\r\n    this.changeKeyword = this.changeKeyword.bind(this);\r\n  }\r\n\r\n  changeKeyword(e) {\r\n    this.setState({\r\n      keyword: e.target.value,\r\n    });\r\n  }\r\n\r\n  render() {\r\n    return (    \r\n      <AppBar position=\"fixed\" color=\"primary\" >\r\n        <Toolbar>\r\n            <Typography variant=\"title\" color=\"inherit\" style={{marginRight:\"16px\"}}>\r\n            <Link to='/' style={{textDecoration:'none',color:'inherit'}}>\r\n              Preview5\r\n              </Link>\r\n            </Typography>\r\n          <div style={{ flexGrow: 1 }}></div>\r\n          <div style={{position:\"relative\", marginLeft:0, backgroundColor: fade('#FFFFFF', 0.15),}}>\r\n          <div style={{position: 'absolute',height: '100%',display: 'flex',alignItems: 'center',justifyContent: 'center',paddingLeft:\"8px\"}}>\r\n            <SearchIcon />\r\n            </div>\r\n            <InputBase name=\"keyword\" type=\"search\" placeholder=\"Searchâ€¦\" style={{color: \"inherit\",paddingLeft:\"48px\"}} value={this.state.keyword} onChange={this.changeKeyword} onKeyDown={(e) => (e.keyCode === 13)?this.props.searchByKeyword(this.state.keyword):null} onKeyUp={(e) => (e.keyCode === 13)?document.activeElement.blur():null} />\r\n          </div>\r\n        </Toolbar>\r\n      </AppBar>      \r\n    );\r\n  }\r\n}\r\n\r\nclass Control extends React.Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      playState: props.playState\r\n    }\r\n  }\r\n\r\n  componentWillReceiveProps(props) {\r\n    this.setState({\r\n      playState: props.playState\r\n    });\r\n  }\r\n\r\n  render(){\r\n    let playState = this.state.playState;    \r\n    let card = ''\r\n    let button = '';\r\n    if(!playState) {\r\n    } else {\r\n      const result = this.props.results[this.props.index]\r\n      const table = <table><tbody><tr><td><img border={1} src={result.artworkUrl100} alt={result.name} style={{width:'32px', height:'32px'}}></img></td><td>{result.trackName} / {result.artistName}</td></tr></tbody></table>\r\n      card = <Card elevation={8} style={{position:'fixed',left:'0px',bottom:'0px',height:'40px', width:'100%', padding:\"4px\", zIndex:'990', alignItems:'top'}}>{table}</Card>\r\n\r\n      if(playState === 'play'){  \r\n        button = <Fab style={{position:'fixed',right:'20px', bottom:'20px', padding:\"4px\", zIndex:'999'}} color=\"secondary\" onClick={() => this.props.pause()}><Icon fontSize=\"small\">pause_arrow</Icon></Fab>;\r\n      } else {\r\n        button = <Fab style={{position:'fixed',right:'20px', bottom:'20px', padding:\"4px\", zIndex:'999'}} color=\"secondary\" onClick={() => this.props.restart()}><Icon fontSize=\"small\">play_arrow</Icon></Fab>;\r\n      }\r\n    }\r\n\r\n    return(\r\n      <div>\r\n        {card}\r\n        {button}\r\n      </div>\r\n    )\r\n  }\r\n\r\n}\r\n\r\nclass List extends React.Component {\r\n  constructor(props) {\r\n    super(props);\r\n\r\n    this.state = {\r\n      results: props.results,\r\n    };\r\n  }\r\n\r\n  componentWillReceiveProps(props) {\r\n    this.setState({\r\n      results: props.results,\r\n    });\r\n  }\r\n\r\n  render() {\r\n    let children = [];\r\n    \r\n    let results = this.state.results;\r\n\r\n    results.forEach((result, index) => {\r\n      children.push(<Row result={result} key={result.trackId} index={index} play={this.props.play}></Row>);\r\n    });\r\n    children.push(<div style={{height:'40px'}}></div>)\r\n\r\n    return ( \r\n      <div>{children}</div>\r\n    );\r\n  }\r\n}\r\n\r\nclass Row extends React.Component {\r\n\r\n  render() {\r\n    let result = this.props.result;\r\n    let index = this.props.index;\r\n\r\n    let iTunesLinstStyle = {\r\n      display:'inline-block',\r\n      overflow:'hidden',\r\n      background:'url(https://linkmaker.itunes.apple.com/assets/shared/badges/ja-jp/itunes-sm.svg) no-repeat',\r\n      width:'45px',\r\n      height:'15px',\r\n      backgroundSize:'contain'\r\n    }\r\n    \r\n    return (\r\n      \r\n        <Card style={{marginBottom: '8px'}}>\r\n          <table>\r\n        <tbody>\r\n          <tr>\r\n            <td>\r\n            <img src={this.props.result.artworkUrl100} alt={this.props.result.name}></img>\r\n            </td>\r\n            <td>\r\n              {index + 1}. {result.trackName}<IconButton style={{padding:\"4px\"}} onClick={() => this.props.play(index)}><Icon fontSize=\"small\">play_circle_filled</Icon></IconButton>\r\n              <br></br>\r\n              {result.artistName}\r\n              <Link to={'/id/'+this.props.result.artistId} style={{textDecoration:'none'}}>\r\n                <IconButton style={{padding:\"4px\"}} ><Icon fontSize=\"small\" >search</Icon></IconButton> \r\n              </Link>\r\n              <br></br>\r\n              {result.collectionName}\r\n              <Link to={'/id/'+this.props.result.collectionId} style={{textDecoration:'none'}}>\r\n                <IconButton style={{padding:\"4px\"}} ><Icon fontSize=\"small\" >search</Icon></IconButton> \r\n              </Link>\r\n              <br></br>\r\n              <a id={this.props.result.id} href={this.props.result.trackViewUrl} target=\"_blank\" rel=\"noopener noreferrer\" style={iTunesLinstStyle}> </a>\r\n            </td>\r\n          </tr>\r\n        </tbody>\r\n        </table>\r\n        </Card>\r\n    );\r\n  }\r\n}\r\n\r\n// ========================================\r\n\r\nReactDOM.render(\r\n  <BrowserRouter basename='/Preview5'>\r\n    <div>\r\n      <Switch>\r\n        <Route path='/q/:query' component={Logic}></Route>\r\n        <Route path='/id/:id' component={Logic}></Route>\r\n        <Route path='/' component={Logic}></Route>\r\n      </Switch>\r\n    </div>\r\n  </BrowserRouter>,\r\n  document.getElementById('root')\r\n);"],"sourceRoot":""}